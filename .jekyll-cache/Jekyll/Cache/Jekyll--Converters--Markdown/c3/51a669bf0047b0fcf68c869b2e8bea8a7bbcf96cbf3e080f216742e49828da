I"ÕX<style>.embed-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; } .embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }</style>
<div class="embed-container"><iframe src="https://www.youtube.com/embed/aCCBNLOYO94?&amp;autoplay=1" frameborder="0" allowfullscreen=""></iframe></div>

<p><strong>In this tutorial, I‚Äôm going to cover up how to install and configure Zabbix 4.4 Monitoring Server on CentOS8</strong></p>

<h3 id="introduction">Introduction:</h3>

<p>Zabbix is an enterprise-class free open source monitoring solution.</p>

<p>Newly released Zabbix Monitoring solution empowered with unlimited capabilities of monitoring any IT device in house.</p>

<p>Which allows you to keep eye on any kinds of IT infrastructure, services, applications and resources.</p>

<p>You will get ability to monitor any performance metrics and incidents in your network such as Power status, System Status, CPU, Memory and Network bandwidth usage, Packet Loss rate, Link status, New device added or removed. And many more‚Ä¶</p>

<ul>
  <li>Which provides real-time graphing and highly configurable graphing facility to users.</li>
  <li>Available thousands of templates on  the Zabbix share. Which is a community to share thousands of templates and scripts accomplish the monitoring tasks.</li>
  <li>Automatic network discovery provides agent auto registration facility.</li>
  <li>Zabbix API provides interface for 3rd party software integration such as Grafana and many more.</li>
</ul>

<p>For this tutorial, I will  going to install Zabbix using yum destitution package for CentOS and RHEL.</p>

<h3 id="step-01-configure-prerequisitess">STEP 01: Configure Prerequisitess</h3>

<h5 id="a-set-resolvable-hostname">A. Set Resolvable Hostname:</h5>

<p>Now, I‚Äôm going to set host-name with fully qualified domain name(FQDN).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/hostname
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/hosts
</code></pre></div></div>

<h5 id="b-install-latest-epel-release">B. Install Latest EPEL Release:</h5>

<p>Now, I‚Äôm going to install latest epel release</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm <span class="nt">-ivh</span> https://dl.fedoraproject.org/pub/epel/8/Everything/x86_64/Packages/e/epel-release-8-7.el8.noarch.rpm
</code></pre></div></div>

<h5 id="c-update-operating-system">C. Update Operating System:</h5>

<p>Then, Update the Operating System.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nt">-y</span> update
</code></pre></div></div>

<h5 id="d-configure-selinux">D. Configure SELinux:</h5>

<p>You need to execute these commands, If you have enabled SELinux in ‚Äúenforcing‚Äù mode.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setsebool <span class="nt">-P</span> httpd_can_connect_zabbix on

setsebool <span class="nt">-P</span> httpd_can_network_connect_db on
</code></pre></div></div>

<p>Either, You also can set SELinux into ‚Äú<strong>permissive</strong>‚Äù mode</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/selinux/config 
<span class="nv">SELINUX</span><span class="o">=</span>permissive
</code></pre></div></div>

<h5 id="e-reboot-the-system">E. Reboot the System:</h5>

<h3 id="step-02-install-apache-httpd-web-server">STEP 02: Install Apache HTTPD Web Server</h3>

<h5 id="a-install-httpd-package">A. Install HTTPD Package:</h5>

<p>Now, I‚Äôll going to install httpd package for web server.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nb">install </span>httpd httpd-tools
</code></pre></div></div>

<h5 id="b-enable--start-httpd-service">B. Enable &amp; Start HTTPD Service:</h5>

<p>Enable service to start automatically at the system boots.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl <span class="nb">enable </span>httpd.service
</code></pre></div></div>

<p>Then,  Start service.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl start httpd.service
</code></pre></div></div>
<h5 id="c-allow-httpd-through-the-firewall">C. Allow HTTPD Through The Firewall:</h5>

<p>Allow port 80 for Apache service through out the system firewall.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>firewall-cmd <span class="nt">--permanent</span> <span class="nt">--add-service</span><span class="o">=</span>http
firewall-cmd <span class="nt">--permanent</span> <span class="nt">--add-service</span><span class="o">=</span>https
firewall-cmd <span class="nt">--permanent</span> <span class="nt">--add-port</span><span class="o">=</span>80/tcp
firewall-cmd <span class="nt">--permanent</span> <span class="nt">--add-port</span><span class="o">=</span>443/tcp
firewall-cmd <span class="nt">--reload</span>
</code></pre></div></div>

<h5 id="d-verify-the-service-is-running">D. verify The Service is Running:</h5>

<p>Finally, Check weather the Apache service and listen through the port 80</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat <span class="nt">-tulpen</span> | <span class="nb">grep </span>httpd
</code></pre></div></div>

<p>Now, goto /var/www/html/ directory and create a index.html file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /var/www/html/index.html
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">"THIS IS A TEST PAGE"</code></p>

<p>Save and exit.</p>

<p>Then, Open up the web browser and hit the server‚Äôs IP address</p>

<p><code class="language-plaintext highlighter-rouge">http://&lt;your_server_ip_address&gt;/</code></p>

<p>OK, Now you‚Äôll see Apache testing page. Now Apache configuration has been completed.</p>

<p>Let‚Äôs head-over to next step.</p>

<h3 id="step-03-install--configure-php">STEP 03: Install &amp; Configure PHP</h3>

<h5 id="a-install-php--dependencies">A. Install PHP &amp; Dependencies:</h5>

<p>Now, I‚Äôm going to install PHP and required PHP dependencies which required to run Zabbix fronted.</p>

<p>I Here, PHP used to gather matrices from MariaDB/Mysql database and process to display dynamic content via Apache web server</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nt">-y</span> <span class="nb">install </span>php php-cli php-common php-devel php-pear php-gd php-mbstring php-mysqlnd php-xml php-bcmath
</code></pre></div></div>

<p>Then, We need to configure ‚Äú<strong>php.ini</strong>‚Äù file with these variables.</p>

<h5 id="b-configure-php">B. Configure PHP:</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/php.ini
</code></pre></div></div>

<p>OR</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"&lt;?php phpinfo(); ?&gt;"</span> | <span class="nb">sudo tee</span> /var/www/html/info.php
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>max_execution_time <span class="o">=</span> 600
max_input_time <span class="o">=</span> 600
memory_limit <span class="o">=</span> 1024M
post_max_size <span class="o">=</span> 32M
upload_max_filesize <span class="o">=</span> 32M
date.timezone <span class="o">=</span> Asia/Colombo
</code></pre></div></div>

<h5 id="c-test-php">C. Test PHP:</h5>

<p>Finally, Create a ‚Äú<strong>info.php</strong>‚Äù file to check whether PHP working well.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /var/www/html/info.php
&lt;?php phpinfo<span class="o">()</span><span class="p">;</span> ?&gt;
</code></pre></div></div>

<p>Restart Apache service again.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl restart httpd.service
</code></pre></div></div>

<p>Then, Open the web browser and hit server‚Äôs IP address with ‚Äúinfo.php‚Äù. The you would see a page like this.</p>

<p><code class="language-plaintext highlighter-rouge">http://&lt;your_server_ip_address&gt;/info.php</code></p>

<p><img src="/images/pages/Zabbix4.4/zabbix-1.png" width="100%" /></p>

<h3 id="step-04-install-and-configure-mariadb">STEP 04: Install and Configure MariaDB</h3>

<h5 id="a-install-mariadb">A. Install MariaDB:</h5>

<p>Then, Install MariaDB on our Zabbix hosting server.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nb">install </span>mariadb mariadb-server
</code></pre></div></div>

<h5 id="c-allow-mysql-service-through-the-firewall">C. Allow MySQL Service Through The Firewall:</h5>

<p>Allow MariaDB/MySQL service through the firewall.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>firewall-cmd <span class="nt">--permanent</span> <span class="nt">--add-service</span><span class="o">=</span>mysql 
firewall-cmd <span class="nt">--reload</span>
</code></pre></div></div>

<p>Start and enable Mariadb/MySQL service on reboot.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl start mariadb.service
systemctl <span class="nb">enable </span>mariadb.service
</code></pre></div></div>

<h5 id="d-mysql-initial-setup">D. MySQL Initial Setup:</h5>

<p>MariaDB Initial configuration:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mysql_secure_installation</span>

<span class="k">Set</span> <span class="n">root</span> <span class="n">password</span><span class="o">?</span> <span class="p">[</span><span class="n">Y</span><span class="o">/</span><span class="n">n</span><span class="p">]</span> <span class="n">Y</span>

<span class="k">New</span> <span class="n">password</span><span class="p">:</span>

<span class="n">Re</span><span class="o">-</span><span class="n">enter</span> <span class="k">new</span> <span class="n">password</span><span class="p">:</span>

<span class="n">Remove</span> <span class="n">anonymous</span> <span class="n">users</span><span class="o">?</span> <span class="p">[</span><span class="n">Y</span><span class="o">/</span><span class="n">n</span><span class="p">]</span> <span class="n">Y</span>

<span class="n">Disallow</span> <span class="n">root</span> <span class="n">login</span> <span class="n">remotely</span><span class="o">?</span> <span class="p">[</span><span class="n">Y</span><span class="o">/</span><span class="n">n</span><span class="p">]</span> <span class="n">Y</span>

<span class="n">Reload</span> <span class="n">privilege</span> <span class="n">tables</span> <span class="n">now</span><span class="o">?</span> <span class="p">[</span><span class="n">Y</span><span class="o">/</span><span class="n">n</span><span class="p">]</span> <span class="n">Y</span>
</code></pre></div></div>

<p>Log into MariaDB Server:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-uroot</span> <span class="nt">-p</span>

MariaDB <span class="o">[(</span>none<span class="o">)]&gt;</span> <span class="k">select </span>version<span class="o">()</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-V</span>
</code></pre></div></div>

<h3 id="step-05-create-zabbixdb-database-and-zabbixuser-user">STEP 05: Create ‚Äúzabbixdb‚Äù database and ‚Äúzabbixuser‚Äù user</h3>

<h5 id="a-create-a-zabbix-user--dsatabase">A. Create a Zabbix User &amp; Dsatabase:</h5>

<p>Now, I‚Äôm going to create a Zabbix user and a database.
In this time, I‚Äôm going use ‚Äú<strong>zabbixuser</strong>‚Äù as a user and ‚Äú<strong>zabbixdb</strong>‚Äù as a database.</p>

<p>First login into MariaDB/MySQL.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-uroot</span> <span class="nt">-p</span>
Enter password:
</code></pre></div></div>

<p>Then create a database.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">zabbixdb</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">UTF8</span> <span class="k">COLLATE</span> <span class="n">UTF8_BIN</span><span class="p">;</span>
</code></pre></div></div>

<p>Grant privileges to zabbixuser and zabbixdb with a password.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="n">zabbixdb</span><span class="p">.</span><span class="o">*</span> <span class="k">to</span> <span class="n">zabbixuser</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'PASSWORD'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="n">zabbixdb</span><span class="p">.</span><span class="o">*</span> <span class="k">to</span> <span class="n">zabbixuser</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'PASSWORD'</span><span class="p">;</span>
</code></pre></div></div>

<p>Refresh permissons.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">FLUSH</span> <span class="k">PRIVILEGES</span><span class="p">;</span>

<span class="n">QUIT</span><span class="p">;</span>
</code></pre></div></div>

<p>Now, I have completed the installation of LAMP stack which include Apache, PHP and MariaDB.</p>

<p>Now we can go straight forward to the Zabbix package installation and configuration.</p>

<h3 id="step-06-install--configure-zabbix-server">STEP 06: Install &amp; Configure Zabbix Server</h3>

<p>First,  We need to import PGP trusted signing key.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm <span class="nt">--import</span> http://repo.zabbix.com/RPM-GPG-KEY-ZABBIX
</code></pre></div></div>

<p>Next, Install the repository configuration package for the Zabbix.</p>

<p><strong>RHEL8 / CENTOS8</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm <span class="nt">-Uvh</span> https://repo.zabbix.com/zabbix/4.4/rhel/8/x86_64/zabbix-release-4.4-1.el8.noarch.rpm
</code></pre></div></div>

<p><strong>RHEL7 / CENTOS7</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm <span class="nt">-Uvh</span> https://repo.zabbix.com/zabbix/4.4/rhel/7/x86_64/zabbix-release-4.4-1.el7.noarch.rpm
</code></pre></div></div>

<p>Then, Install Zabbix Server.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
yum <span class="nb">install </span>zabbix-server-mysql zabbix-web-mysql zabbix-apache-conf
</code></pre></div></div>
<p><img src="/images/pages/Zabbix4.4/zabbix-2.png" width="100%" /></p>

<p>Finally, Import Zabbix server database schema.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zcat /usr/share/doc/zabbix-server-mysql/create.sql.gz | mysql <span class="nt">-uzabbixuser</span> <span class="nt">-pPASSWORD</span> zabbixdb
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">NOTE: This may take a while to import the database schema. So, Please wait untill it done.</code></p>

<p>Configure Zabbix Server:</p>

<p>Let‚Äôs headover to Zabbix server main configuration file which located in ‚Äú<strong>/etc/zabbix/zabbix_server.conf</strong>‚Äù and do these changes.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/zabbix/zabbix_server.conf
</code></pre></div></div>

<p>In here you need to Zabbix server‚Äôs IP address, MySQL or MariaDB username and password</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">## DATABASE NAME </span>
<span class="nv">DBName</span><span class="o">=</span>zabbixdb

<span class="c">## DATABASE USERNAME</span>
<span class="nv">DBUser</span><span class="o">=</span>zabbixuser

<span class="c">## DATABASE PASSWORD</span>
<span class="nv">DBPassword</span><span class="o">=</span>PASSWORD
</code></pre></div></div>

<p>Allow Zabbix Service Through The Firewall:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>firewall-cmd <span class="nt">--permanent</span> <span class="nt">--add-port</span><span class="o">=</span>10050/tcp
firewall-cmd <span class="nt">--permanent</span> <span class="nt">--add-port</span><span class="o">=</span>10051/tcp
firewall-cmd <span class="nt">--reload</span>
</code></pre></div></div>

<p>Set Zabbix server name:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/httpd/conf/httpd.conf
</code></pre></div></div>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ServerName</span> <span class="nf">zabbix.da.com</span><span class="p">:</span><span class="mi">80</span>

<span class="s">ServerAdmin</span> <span class="s">zabbix@da.com</span>
</code></pre></div></div>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">systemctl</span> <span class="s">restart</span> <span class="s">httpd.service</span>
</code></pre></div></div>

<p><strong>Configure PHP for Zabbix Frontend:</strong></p>

<p>Let‚Äôs move to Zabbix server‚Äôs Apache configuration file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/httpd/conf.d/zabbix.conf
</code></pre></div></div>

<p>Some PHP values has be configured. These values you may be need to change later when your requirements getting higher. It depends on your Zabbix server where you going to use. Don‚Äôt forget to uncomment and set your Time Zone.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/httpd/conf.d/zabbix.conf
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Allow from All
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php_value max_execution_time 600
php_value memory_limit 1024M
php_value post_max_size 32M
php_value upload_max_filesize 32M
php_value max_input_time 600
php_value max_input_vars 10000
php_value always_populate_raw_post_data <span class="nt">-1</span>
php_value date.timezone Asia/Colombo
</code></pre></div></div>

<p>Start &amp; enable service to start at system boot.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl <span class="nb">enable </span>zabbix-server 
<span class="nb">sudo </span>systemctl restart zabbix-server
</code></pre></div></div>

<h3 id="step-07-further-selinux-configuration-for-zabbix">STEP 07: Further SELinux Configuration For Zabbix</h3>

<p>If your SELinux configuration is still on ‚Äú<strong>enforcing</strong>‚Äù mode. then you need to execute these commands to make connection between Zabbix frontend and the server.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setsebool <span class="nt">-P</span> httpd_can_connect_zabbix on
</code></pre></div></div>

<h3 id="step-08-restart--enable-all-services-again">STEP 08: Restart &amp; Enable All Services Again.</h3>

<p>Now, You I‚Äôll enable &amp; restart all services once.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl <span class="nb">enable </span>httpd.service mariadb.service zabbix-server.service
systemctl restart <span class="nt">-l</span>  httpd.service mariadb.service zabbix-server.service
</code></pre></div></div>

<p>And Check whether they are running well.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl status <span class="nt">-l</span>  httpd.service mariadb.service zabbix-server.service
</code></pre></div></div>

<p>Now, We are almost ready to complete the Zabbix server setup.
Let‚Äôs Head over to the web browser and enter Zabbix server‚Äôs IP address with the ‚Äú<strong>zabbix</strong>‚Äù suffix. and hit enter.</p>

<p><code class="language-plaintext highlighter-rouge">http://zabbix_server_IP/zabbix/</code></p>

<p>For the first time you may need to log into  the system using <strong>default</strong> username and password.</p>

<p>Default Zabbix Username: <strong>Admin</strong></p>

<p>Default Zabbix Password: <strong>zabbix</strong></p>

<p>Then, follow the instruction as seen on installation wizard.
<img src="/images/pages/Zabbix4.4/zabbix-3.png" width="100%" />
<img src="/images/pages/Zabbix4.4/zabbix-4.png" width="100%" />
<img src="/images/pages/Zabbix4.4/zabbix-5.png" width="100%" />
<img src="/images/pages/Zabbix4.4/zabbix-6.png" width="100%" />
<img src="/images/pages/Zabbix4.4/zabbix-7.png" width="100%" />
<img src="/images/pages/Zabbix4.4/zabbix-8.png" width="100%" />
<img src="/images/pages/Zabbix4.4/zabbix-9.png" width="100%" />
<img src="/images/pages/Zabbix4.4/zabbix-10.png" width="100%" /></p>

:ET
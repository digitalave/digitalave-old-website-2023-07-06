I"ên<p><img src="\images\librenms\LibreNMS.png" width="100%" /></p>

<h2 id="install-and-configure-librenms-server-on-centos-7">INSTALL AND CONFIGURE LibreNMS SERVER ON CENTOS 7</h2>

<h3 id="what-is-librenms-">What is LibreNMS ?</h3>

<p>LibreNMS is an opensource monitoring tool for servers and network hardware.
Based on Nginx or Apache, MySQL, and PHP.
LibreNMS can discover network using UDP, FDP, LLDP, OSPF, BGP, SNMP and ARP portocols.Collects monitoring metrices via SNMP protocol.</p>

<h4 id="prerequisite-">Prerequisite:-</h4>

<p>1.Root login</p>

<p>2.CenstOS 7</p>

<p>3.EPEL repository</p>

<h3 id="steps">STEPS</h3>

<p><strong>STEP 1:-Install Required Packages.</strong></p>

<p><strong>STEP 2:-Install NginX Web Server.</strong></p>

<p><strong>STEP 3:-Install and Configure MariaDB.</strong></p>

<p><strong>STEP 4:-Download and Configure LibreNMS.</strong></p>

<p><strong>STEP 5:-LibreNMS Web-based Installation.</strong></p>

<p><strong>STEP 6:-Firewall and SELinux Configuration.</strong></p>

<p><strong>STEP 7:-Install FPing and SNMP.</strong></p>

<p><strong>STEP 8:-Set Permission.</strong></p>

<p><strong>STEP 9:-LibreNMS Web Installation.</strong></p>

<h3 id="step-1--install-required-packages">STEP 1:- Install Required Packages</h3>

<p>Configure EPEL Repository.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# rpm <span class="nt">-Uvh</span> https://dl.fedoraproject.org/pub/epel/7/x86_64/Packages/e/epel-release-7-11.noarch.rpm
</code></pre></div></div>

<p><img src="\images\librenms\image001.png" width="100%" /></p>

<p>Configure Webtatic Repository.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# rpm <span class="nt">-Uvh</span> https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
</code></pre></div></div>

<p><img src="\images\librenms\image002.png" width="100%" /></p>

<p>Install some packages including ImageMagic, rrdtool, git, snmp, nmap, fping and more.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# yum <span class="nb">install</span> <span class="nt">-y</span> cronie fping git ImageMagick jwhois mtr net-snmp net-snmp-utils nmap rrdtool MySQL-python python-memcached
</code></pre></div></div>

<h3 id="step-2--install-nginx-web-server">STEP 2:- Install Nginx Web Server</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# yum <span class="nb">install</span> <span class="nt">-y</span> nginx
<span class="o">[</span>root@LibreNMS ~]# systemctl <span class="nb">enable </span>nginx
<span class="o">[</span>root@LibreNMS ~]# systemctl start  nginx
</code></pre></div></div>

<p><img src="\images\librenms\image003.png" width="100%" /></p>

<h3 id="step-3--install-and-configure-php-fpm">STEP 3:- Install and Configure PHP-FPM</h3>

<p>Install PHP-FPM version 7 for CentOS7 from Webtatic repository. Webtatic repository has been installed on previous step.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# yum <span class="nb">install</span> <span class="nt">-y</span> composer php72w php72w-cli php72w-common php72w-curl php72w-fpm php72w-gd php72w-mbstring php72w-mysqlnd php72w-process php72w-snmp php72w-xml php72w-zip
</code></pre></div></div>

<p>Update the PEAR (PHP Extension and Application Repository) repository.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# yum <span class="nb">install </span>php72w-pear.noarch
<span class="o">[</span>root@LibreNMS ~]# pear channel-update pear.php.net
<span class="o">[</span>root@LibreNMS ~]# pear <span class="nb">install </span>Net_IPv4-1.3.4
<span class="o">[</span>root@LibreNMS ~]# pear <span class="nb">install </span>Net_IPv6-1.2.2b2
</code></pre></div></div>

<p><img src="\images\librenms\image004.png" width="100%" /></p>

<p>Set default timezone in the php.ini file. un-comment and edit look like below.</p>

<blockquote>
  <p>date.timezone = Asia/Colombo</p>
</blockquote>

<blockquote>
  <p>cgi.fix_pathinfo=0</p>
</blockquote>

<p>Now, Set PHP-FPM to running under the ‚Äòsock‚Äô file instead of the server port.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# vim /etc/php-fpm.d/www.conf
</code></pre></div></div>

<p>Change ‚Äòlisten‚Äô port line to the sock file below.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch</span> /var/run/php-fpm/php7.2-fpm.sock <span class="nb">chmod </span>777
/var/run/php-fpm/php7.2-fpm.sock
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>listen <span class="o">=</span> /var/run/php-fpm/php7.2-fpm.sock
</code></pre></div></div>

<p>Ucomment the ‚Äòlisten‚Äô owner, group and the permission of the sock file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>listen.owner <span class="o">=</span> nginx
listen.group <span class="o">=</span> nginx
listen.mode <span class="o">=</span> 0660
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# systemctl start php-fpm.service 
<span class="o">[</span>root@LibreNMS ~]# systemctl <span class="nb">enable </span>php-fpm.service
</code></pre></div></div>

<p>Now, PHP-FPM should running under the sock file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# netstat  <span class="nt">-pl</span> | <span class="nb">grep </span>php
</code></pre></div></div>

<p><img src="\images\librenms\image005.png" width="100%" /></p>

<h3 id="step-3--install-and-configure-mariadb">STEP 3:- Install and Configure MariaDB</h3>

<p><strong>Install MariaDB</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# yum <span class="nb">install</span> <span class="nt">-y</span> mariadb mariadb-server 
<span class="o">[</span>root@LibreNMS ~]# systemctl start mariadb.service 
<span class="o">[</span>root@LibreNMS ~]# systemctl <span class="nb">enable </span>mariadb.service
</code></pre></div></div>

<p><img src="\images\librenms\image006.png" width="100%" /></p>

<blockquote>
  <p>Set root password? [Y/n] Y</p>

  <p>Remove anonymous users? [Y/n] Y</p>

  <p>Disallow root login remotely? [Y/n] Y</p>

  <p>Remove test database and access to it? [Y/n] Y</p>

  <p>Reload privilege tables now? [Y/n] Y</p>
</blockquote>

<p>Create a new database and a user for LibreNMS.</p>

<p>Create database named ‚Äúlibrenms‚Äù and a user named ‚Äúlibrenms‚Äù with password **</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# mysql <span class="nt">-u</span> root ‚Äìp
MariaDB <span class="o">[(</span>none<span class="o">)]&gt;</span> CREATE DATABASE librenms CHARACTER SET utf8 COLLATE utf8_unicode_ci<span class="p">;</span>
MariaDB <span class="o">[(</span>none<span class="o">)]&gt;</span> CREATE USER <span class="s1">'librenms'</span>@<span class="s1">'localhost'</span> IDENTIFIED BY <span class="s1">'&lt;PASSWORD&gt;'</span><span class="p">;</span>
MariaDB <span class="o">[(</span>none<span class="o">)]&gt;</span> GRANT ALL PRIVILEGES ON librenms.<span class="k">*</span> TO <span class="s1">'librenms'</span>@<span class="s1">'localhost'</span><span class="p">;</span>
MariaDB <span class="o">[(</span>none<span class="o">)]&gt;</span> FLUSH PRIVILEGES<span class="p">;</span>
MariaDB <span class="o">[(</span>none<span class="o">)]&gt;</span> quit<span class="p">;</span>
</code></pre></div></div>

<p><img src="\images\librenms\image007.png" width="100%" /></p>

<p>Edit /etc/my.cnf file and add new configuration.</p>

<p>Paste below additional configuration under the ‚Äò[mysqld]‚Äô section.</p>

<blockquote>
  <p>innodb_file_per_table=1</p>

  <p>sql-mode=‚Äù‚Äù</p>

  <p>lower_case_table_names=0</p>
</blockquote>

<p><img src="\images\librenms\image008.png" width="100%" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# systemctl restart mariadb.service
</code></pre></div></div>

<h3 id="step-4--download-and-configure-librenms">STEP 4:- Download and Configure LibreNMS</h3>

<p>Create new system user named ‚Äòlibrenms‚Äô and define the home directory under ‚Äò/opt/librenms‚Äô and add ‚Äòlibrenms‚Äô user to ‚Äònginx‚Äô group.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# useradd librenms <span class="nt">-d</span> /opt/librenms <span class="nt">-M</span> <span class="nt">-r</span>
<span class="o">[</span>root@LibreNMS ~]# usermod <span class="nt">-a</span> <span class="nt">-G</span> librenms nginx
</code></pre></div></div>

<p>Clone LibreNMS into /opt/librenms directory.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS opt]# <span class="nb">cd</span> /opt/
<span class="o">[</span>root@LibreNMS opt]# git clone https://github.com/librenms/librenms.git librenms
</code></pre></div></div>

<p><strong>This Step is optional‚Ä¶</strong></p>

<p>Create new directories for LibreNMS logs and rrd files.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS opt]# <span class="nb">mkdir</span> <span class="nt">-p</span> /opt/librenms/<span class="o">{</span>logs,rrd<span class="o">}</span>
<span class="o">[</span>root@LibreNMS opt]# <span class="nb">chmod </span>755 /opt/librenms/rrd/
</code></pre></div></div>

<p><img src="\images\librenms\image009.png" width="100%" /></p>

<p><img src="\images\librenms\image010.png" width="100%" /></p>

<p>Change ownership of all files and directories under ‚Äò/opt/librenms‚Äô to the ‚Äòlibrenms‚Äô user and group.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS opt]# <span class="nb">chown</span> <span class="nt">-R</span> librenms:librenms /opt/librenms/
</code></pre></div></div>

<p><img src="\images\librenms\image011.png" width="100%" /></p>

<p><strong>Configure LibreNMS virtual host</strong></p>

<p>LibreNMS is a Web-based application and we using Nginx web server to host it.
Create a new virtual host file user ‚Äòlibrenms.conf‚Äô under Nginx ‚Äòconf.d‚Äô directory.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# vim /etc/nginx/conf.d/librenms.conf
</code></pre></div></div>

<p>Paste configuration below.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server <span class="o">{</span>
 listen      80<span class="p">;</span>
 server_name librenms.orelit.com<span class="p">;</span>
 server_name 192.168.100.10<span class="p">;</span>
 root        /opt/librenms/html<span class="p">;</span>
 index       index.php<span class="p">;</span>

 charset utf-8<span class="p">;</span>
 <span class="nb">gzip </span>on<span class="p">;</span>
 gzip_types text/css application/javascript text/javascript application/x-javascript image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon<span class="p">;</span>
 location / <span class="o">{</span>
  try_files <span class="nv">$uri</span> <span class="nv">$uri</span>/ /index.php?<span class="nv">$query_string</span><span class="p">;</span>
 <span class="o">}</span>
 location /api/v0 <span class="o">{</span>
  try_files <span class="nv">$uri</span> <span class="nv">$uri</span>/ /api_v0.php?<span class="nv">$query_string</span><span class="p">;</span>
 <span class="o">}</span>
 location ~ <span class="se">\.</span>php <span class="o">{</span>
  include fastcgi.conf<span class="p">;</span>
  fastcgi_split_path_info ^<span class="o">(</span>.+<span class="se">\.</span>php<span class="o">)(</span>/.+<span class="o">)</span><span class="nv">$;</span>
  fastcgi_pass unix:/var/run/php-fpm/php7.2-fpm.sock<span class="p">;</span>
 <span class="o">}</span>
 location ~ /<span class="se">\.</span>ht <span class="o">{</span>
  deny all<span class="p">;</span>
 <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Test Nginx configuration.</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# nginx <span class="nt">-t</span>
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf <span class="nb">test </span>is successful
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# systemctl restart nginx.service
</code></pre></div></div>

<p><strong>NOTE:</strong>  If this is the only site you are hosting on this server. Then should need to disable default site. Delete the ‚Äòserver‚Äô section from /etc/nginx/nginx.conf</p>

<h3 id="step-6--firewall-and-selinux-configuration">STEP 6:- Firewall and SELinux Configuration</h3>

<p>Allow Access through FirewallD:-</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# firewall-cmd ‚Äìpermanent <span class="nt">--zone</span> public <span class="nt">--add-service</span><span class="o">=</span>http
<span class="o">[</span>root@LibreNMS ~]# firewall-cmd <span class="nt">--permanent</span> <span class="nt">--zone</span> public <span class="nt">--add-service</span><span class="o">=</span>https
<span class="o">[</span>root@LibreNMS ~]# firewall-cmd <span class="nt">--permanent</span> <span class="nt">--zone</span> public <span class="nt">--add-port</span><span class="o">=</span>161/udp
<span class="o">[</span>root@LibreNMS ~]# firewall-cmd ‚Äìreload
</code></pre></div></div>

<p>SELinux Confguration:-</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# yum <span class="nb">install </span>policycoreutils-python
<span class="o">[</span>root@LibreNMS ~]# semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s1">'/opt/librenms/logs(/.*)?'</span>
<span class="o">[</span>root@LibreNMS ~]# semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_rw_content_t <span class="s1">'/opt/librenms/logs(/.*)?'</span>
<span class="o">[</span>root@LibreNMS ~]# restorecon <span class="nt">-RFvv</span> /opt/librenms/logs/
<span class="o">[</span>root@LibreNMS ~]# semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s1">'/opt/librenms/rrd(/.*)?'</span>
<span class="o">[</span>root@LibreNMS ~]# semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_rw_content_t <span class="s1">'/opt/librenms/rrd(/.*)?'</span>
<span class="o">[</span>root@LibreNMS ~]# restorecon <span class="nt">-RFvv</span> /opt/librenms/rrd/
<span class="o">[</span>root@LibreNMS ~]# semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s1">'/opt/librenms/storage(/.*)?'</span>
<span class="o">[</span>root@LibreNMS ~]# semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_rw_content_t <span class="s1">'/opt/librenms/storage(/.*)?'</span>
<span class="o">[</span>root@LibreNMS ~]# restorecon <span class="nt">-RFvv</span> /opt/librenms/storage/
<span class="o">[</span>root@LibreNMS ~]# semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s1">'/opt/librenms/bootstrap/cache(/.*)?'</span>
<span class="o">[</span>root@LibreNMS ~]# semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_rw_content_t <span class="s1">'/opt/librenms/bootstrap/cache(/.*)?'</span>
<span class="o">[</span>root@LibreNMS ~]# restorecon <span class="nt">-RFvv</span> /opt/librenms/bootstrap/cache/
<span class="o">[</span>root@LibreNMS ~]# setsebool <span class="nt">-P</span> <span class="nv">httpd_can_sendmail</span><span class="o">=</span>1
<span class="o">[</span>root@LibreNMS ~]# setsebool <span class="nt">-P</span> httpd_execmem 1
</code></pre></div></div>

<h3 id="step-7--configure-fping-snmp-and-cron-job">STEP 7:- Configure FPing, SNMP and Cron Job</h3>

<p>Configure FPing:
Create the file http_fping.tt with the following contents.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@librenms etc]# vim http_fping.tt
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require <span class="o">{</span>
<span class="nb">type </span>httpd_t<span class="p">;</span>
class capability net_raw<span class="p">;</span>
class rawip_socket <span class="o">{</span> getopt create setopt write <span class="nb">read</span> <span class="o">}</span><span class="p">;</span>
<span class="o">}</span>

<span class="c">#============= httpd_t ==============</span>
allow httpd_t self:capability net_raw<span class="p">;</span>
allow httpd_t self:rawip_socket <span class="o">{</span> getopt create setopt write <span class="nb">read</span> <span class="o">}</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>Run These Commands:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@librenms etc]# checkmodule <span class="nt">-M</span> <span class="nt">-m</span> <span class="nt">-o</span> http_fping.mod /etc/http_fping.tt
<span class="o">[</span>root@librenms etc]# semodule_package <span class="nt">-o</span> http_fping.pp <span class="nt">-m</span> http_fping.mod
<span class="o">[</span>root@librenms etc]# semodule <span class="nt">-i</span> http_fping.pp
</code></pre></div></div>

<p><strong>Configure SNMP:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@librenms ~]# <span class="nb">cp</span> /opt/librenms/snmpd.conf.example /etc/snmp/snmpd.conf
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@librenms ~]# vim /etc/snmp/snmpd.conf
‚Äúcom2sec <span class="nb">readonly </span>default public‚Äù
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@librenms ~]# curl <span class="nt">-o</span> /usr/bin/distro https://raw.githubusercontent.com/librenms/librenms-agent/master/snmp/distro
<span class="o">[</span>root@librenms ~]# <span class="nb">chmod</span> +x /usr/bin/distro
<span class="o">[</span>root@librenms ~]# systemctl <span class="nb">enable </span>snmpd
<span class="o">[</span>root@librenms ~]# systemctl restart snmpd
Configure Cron Job:
<span class="o">[</span>root@librenms ~]# <span class="nb">cp</span> /opt/librenms/librenms.nonroot.cron /etc/cron.d/librenms
Create Log Rotation Task
<span class="o">[</span>root@librenms ~]# <span class="nb">cp</span> /opt/librenms/misc/librenms.logrotate /etc/logrotate.d/librenms
</code></pre></div></div>

<h3 id="step-8--set-permission">STEP 8:- Set Permission</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@librenms ~]# <span class="nb">chown</span> <span class="nt">-R</span> librenms:librenms /opt/librenms
<span class="o">[</span>root@librenms ~]# setfacl <span class="nt">-d</span> <span class="nt">-m</span> g::rwx /opt/librenms/rrd /opt/librenms/logs /opt/librenms/bootstrap/cache/ /opt/librenms/storage/
<span class="o">[</span>root@librenms ~]# setfacl <span class="nt">-R</span> <span class="nt">-m</span> g::rwx /opt/librenms/rrd /opt/librenms/logs /opt/librenms/bootstrap/cache/ /opt/librenms/storage/
</code></pre></div></div>

<h3 id="step-9--librenms-web-installation">STEP 9:- LibreNMS Web Installation</h3>

<p><strong>NOTE:</strong> If following errors occurred, do below steps.</p>

<p>A.</p>

<p><img src="\images\librenms\image012.png" width="100%" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# <span class="nb">cd</span> /opt/librenms/
<span class="o">[</span>root@LibreNMS librenms]# ./scripts/composer_wrapper.php <span class="nb">install</span> <span class="nt">--no-dev</span>
</code></pre></div></div>

<p>B.</p>

<p><img src="\images\librenms\image013.png" width="100%" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chown</span> <span class="nt">-R</span> librenms:librenms /opt/librenms/bootstrap/cache /opt/librenms/storage /opt/librenms/storage/framework/sessions /opt/librenms/storage/framework/views /opt/librenms/storage/framework/cache /opt/librenms/logs
setfacl <span class="nt">-R</span> <span class="nt">-m</span> g::rwx /opt/librenms/bootstrap/cache /opt/librenms/storage /opt/librenms/storage/framework/sessions /opt/librenms/storage/framework/views /opt/librenms/storage/framework/cache /opt/librenms/logs
setfacl <span class="nt">-d</span> <span class="nt">-m</span> g::rwx /opt/librenms/bootstrap/cache /opt/librenms/storage /opt/librenms/storage/framework/sessions /opt/librenms/storage/framework/views /opt/librenms/storage/framework/cache /opt/librenms/logs
usermod <span class="nt">-a</span> <span class="nt">-G</span> librenms nginx
</code></pre></div></div>

<p>C.</p>

<p><img src="\images\librenms\image014.png" width="100%" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s1">'/opt/librenms/bootstrap/cache(/.*)?'</span>
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_rw_content_t <span class="s1">'/opt/librenms/bootstrap/cache(/.*)?'</span>
restorecon <span class="nt">-RFvv</span> /opt/librenms/bootstrap/cache
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s1">'/opt/librenms/storage(/.*)?'</span>
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_rw_content_t <span class="s1">'/opt/librenms/storage(/.*)?'</span>
restorecon <span class="nt">-RFvv</span> /opt/librenms/storage
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s1">'/opt/librenms/storage/framework/sessions(/.*)?'</span>
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_rw_content_t <span class="s1">'/opt/librenms/storage/framework/sessions(/.*)?'</span>
restorecon <span class="nt">-RFvv</span> /opt/librenms/storage/framework/sessions
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s1">'/opt/librenms/storage/framework/views(/.*)?'</span>
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_rw_content_t <span class="s1">'/opt/librenms/storage/framework/views(/.*)?'</span>
restorecon <span class="nt">-RFvv</span> /opt/librenms/storage/framework/views
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s1">'/opt/librenms/storage/framework/cache(/.*)?'</span>
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_rw_content_t <span class="s1">'/opt/librenms/storage/framework/cache(/.*)?'</span>
restorecon <span class="nt">-RFvv</span> /opt/librenms/storage/framework/cache
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_content_t <span class="s1">'/opt/librenms/logs(/.*)?'</span>
semanage fcontext <span class="nt">-a</span> <span class="nt">-t</span> httpd_sys_rw_content_t <span class="s1">'/opt/librenms/logs(/.*)?'</span>
restorecon <span class="nt">-RFvv</span> /opt/librenms/logs
</code></pre></div></div>

<p><strong>Access the LibreNMS Installation Page:-</strong></p>

<p>http://<IP_OR_FQDN>/install.php</IP_OR_FQDN></p>

<p><strong>Check PHP Module Availability.</strong></p>

<p><img src="\images\librenms\image015.png" width="100%" /></p>

<p><strong>Database Configuration.</strong></p>

<p>DB User: librenms</p>

<p>DB Name: librenms</p>

<p>DB Password: The Password given for the librenms database</p>

<p><img src="\images\librenms\image016.png" width="100%" /></p>

<p><strong>Import MySQL Databse.</strong>
Wait untill importing completed. Make sure NO-ERRORS.</p>

<p><img src="\images\librenms\image017.png" width="100%" /></p>

<p><strong>Create LibreNMS Web Admin Login User.</strong></p>

<p><img src="\images\librenms\image018.png" width="100%" /></p>

<p><strong>Generate Config File.</strong></p>

<p><img src="\images\librenms\image019.png" width="100%" /></p>

<p><img src="\images\librenms\image020.png" width="100%" /></p>

<p>If this error occurred, you have to manually create config.php file under /opt/librenms/ directory.</p>

<p>Copy php code and create config.php file under /opt/librenms directory.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# vim /opt/librenms/config.php
</code></pre></div></div>

<p>Change ownership of config.php file to librenms user and group.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@LibreNMS ~]# <span class="nb">chown </span>librenms:librenms /opt/librenms/config.php
</code></pre></div></div>

<p><img src="\images\librenms\image021.png" width="100%" /></p>

<p><img src="\images\librenms\image022.png" width="100%" /></p>

<h3 id="post-installation-setup-">Post Installation Setup:-</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@librenms librenms]# vim /opt/librenms/config.php
<span class="nv">$config</span><span class="o">[</span>‚Äòfping‚Äô] <span class="o">=</span> ‚Äú/usr/sbin/fping‚Äù<span class="p">;</span>
</code></pre></div></div>

<p><strong>Finally Validate:-</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@librenms librenms]# ./validate.php
</code></pre></div></div>

<p><img src="\images\librenms\image013.png" width="100%" /></p>

<p><strong>Little Request:</strong></p>

<blockquote>
  <p>I appreciate you guys taking the time in reading my post. Please check out my YouTube channel and please subscribe for more as it‚Äôll help me loads.</p>
</blockquote>

<p><a href="https://www.youtube.com/channel/UCovlVsoRVItner26ZJPBjmQ/featured?view_as=subscriber" target="_blank">https://www.youtube.com/channel/UCovlVsoRVItner26ZJPBjmQ/featured?view_as=subscriber</a></p>

<p><a href="https://www.youtube.com/channel/UCovlVsoRVItner26ZJPBjmQ?sub_confirmation=1"><img src="Docker-Installation/sub.gif" /></a></p>

<p><a href="https://www.youtube.com/channel/UCovlVsoRVItner26ZJPBjmQ?sub_confirmation=1"><img src="Docker-Installation/sub.gif" alt="Foo" /></a></p>

:ET